<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        ;
        /*
            基本数据类型的值都存放在栈中，一个变量名对应一个值，
            当将一个基本数据类型的值赋给另一个变量时，就是简单的在栈中新开辟了一个区域存放这个变量名和值
            所以基本数据类型可以简单的通过赋值来复制

            引用数据类型的值都存放在堆中，在栈中存放的只是变量名，和该变量指向堆中的那一个区域的指针
            如果将一个引用数据类型的值赋给另一个变量，只是将这个指针赋给了这个变量，
            相当于两个变量操作堆中的同一个区域，并不是在堆中新开辟了一个区域，将值复制过来一份
            所以引用数据类型不可以简单的通过赋值来复制
        
        */

        /**********************************************************/
        var obj1 = { //创建一个对象
            name: "zhangsan",
            age: 18,
            gender: "男",
            id: 1
        }

        console.log(obj1)

        var obj2 = obj1 //将这个对象赋值给另一个变量

        console.log(obj2)

        obj2.gender = "女" //更改其中一个变量名上的一个属性

        console.log(obj1['gender']) //另外一个变量名上的该属性同样被更改
        console.log(obj2['gender'])

        /**********************************************************/

        /*
        
            浅复制(浅拷贝)

            首先创建一个新的空对象，在堆中新开辟出一片区域、
            进行循环遍历，将传入的对象的属性和方法，
            在新的对象中新创建出一个一个和它们同名的属性和方法，并依次将值赋给它们

            如果对象中有对象，浅拷贝，只是把对象中的第一层的基础数据类型拷贝出来了，
            其余的引用数据类型拿到的还是指针，如果想解决得用深拷贝
            
        */

        var obj3 = { //创建一个对象
            name: "zhangsan",
            age: 18,
            gender: "男",
            id: 1,
            arr: [12, 5, 8, 9]
        }

        function extend(obj) {
            var a = {} //首先创建一个新的空对象，在堆中新开辟出一片区域
            for (var key in obj) {
                a[key] = obj[key]

                //进行循环遍历，将传入的对象的属性和方法，
                //在新的对象中新创建出一个一个和它们同名的属性和方法，并依次将值赋给它们
            }
            return a //将复制好的对象返回出去
        }

        var obj4 = extend(obj3)
        console.log(obj3)
        console.log(obj4)

        obj4.gender = "女" //更改复制后的对象的一个基础数据类型的属性
        console.log(obj3) //原有对象的该属性并没有跟随变化
        console.log(obj4)

        obj4.arr[1] = 100 //更改复制后的对象的一个引用数据类型的属性
        console.log(obj3) //原有对象的该属性会跟随变化
        console.log(obj4) //解决这个问题需要用到深复制

        /*
        
            深复制(深拷贝)         https://www.cnblogs.com/renbo/p/9563050.html

        */
    </script>
</body>

</html>